# Дизайн проекта

Дизайн проекта основан на [лучших практиках](https://docs.godotengine.org/ru/4.x/tutorials/best_practices/index.html) Godot, в том числе применения подхода ООП. В этом документе представлены расширения этих практик.

## Выбор доступности переменной

- Стоит делать переменную приватной, если не планируете к ней обращаться извне.
- Также не стоит каждую публичную переменную инкаспулировать. Это усложняет и замедляет код.

## О статических переменных

- Использование статических переменных в целях создания некого синглтона не разрешается.
    - Используйте *автозагрузку*, которая создана для этой цели.
- Можно использовать статические методы для создания некого класса утилит.

## Отладочный вывод

- Приветствуется отладочный вывод через `print_verbose()`. Рекомендуется печатать его после завершения действия, но до перехода к следующему.
- Используйте `push_error()`, когда:
    - Произошла ошибка, мешающая дальнейшему процессу (например, ошибка загрузки события).
    - Произошла ошибка, связанная с неправильным поведением (например, метод только для сервера вызван на клиенте).
- Используйте `push_warning()`, когда:
    - Произошла небольшая ошибка, не мешающая работе (например, нет подключения к серверу или потеряно соединение).
    - Произошла ошибка, связанная с неправильным поведением, НО не зависящая от локальной логики (например, получен RPC с неправильными данными). Однако, если это мешает корректной работе, вызовие `push_error()`.

## Разное

- Используйте `is_instance_valid()` вместо проверки на `null` или приведения к `bool`. Поведение этой функции стабильно и не будет изменено (в отличии от других способов). Однако можно эту функцию не использовать, если работаете с `RefCounted`.
- Используйте Уникальные имена сцены только в сложных вложенных интерфейсах. В остальных местах ограничтесь обычными `NodePath`.
- Стоит кэшировать выражение в переменную, если оно используется 3 или более раз.
- В местах, где нужны пути, рекомендуется использовать UID, так как их не надо менять при перемещении файла, на который они указывают.
- Используйте `class_name` только тогда, когда вам нужна типизация или класс очень важен. Старайтесь избегать слишком большого количества глобальных классов.

### Пример

```gdscript
if object: # Нестабильно
...
if object == null: # Нестабильно
...
if is_instance_valid(object): # Стабильно
```